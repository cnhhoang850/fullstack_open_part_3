(this["webpackJsonpphone-book"]=this["webpackJsonpphone-book"]||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var a=t(4),r=t(3),o=t(0),u=t.n(o),c=t(14),l=t.n(c),i=function(e){var n=e.tag,t=e.value,a=e.handle;return u.a.createElement("div",null,n," ",u.a.createElement("input",{value:t,onChange:a}))},m=function(e){var n=e.handleSubmit,t=e.filter,a=e.handleFilter,r=e.newName,o=e.handleName,c=e.newNum,l=e.handleNum;return u.a.createElement(u.a.Fragment,null,u.a.createElement("form",{onSubmit:n},u.a.createElement(i,{tag:"filter shown with ",value:t,handle:a}),u.a.createElement("h2",null,"add a new"),u.a.createElement(i,{tag:"name: ",value:r,handle:o}),u.a.createElement(i,{tag:"number: ",value:c,handle:l}),u.a.createElement("div",null,u.a.createElement("button",{type:"submit"},"add"))))},d=function(e){var n=e.people,t=e.deleteHandle;return u.a.createElement(u.a.Fragment,null,n.map((function(e){return u.a.createElement("p",null,e.name," ",e.num," ",u.a.createElement("button",{onClick:function(){return t(e.id,e.name)}},"delete"))})))},f=function(e){var n=e.tag;return u.a.createElement("h1",null,n)},s=t(2),h=t.n(s),b="/api/persons",p=function(){return h.a.get(b).then((function(e){return e.data}))},v=function(e){return h.a.post(b,e)},w=function(e,n){return h.a.put("".concat(b,"/").concat(e),n)},E=function(e){return h.a.delete("".concat(b,"/").concat(e))},g=(t(37),function(e){var n=e.message;return null===n?null:u.a.createElement("div",{className:"error"},n)}),j=function(){var e=Object(o.useState)([]),n=Object(r.a)(e,2),t=n[0],c=n[1],l=Object(o.useState)(""),i=Object(r.a)(l,2),s=i[0],h=i[1],b=Object(o.useState)(""),j=Object(r.a)(b,2),O=j[0],N=j[1],k=Object(o.useState)(""),S=Object(r.a)(k,2),y=S[0],F=S[1],T=Object(o.useState)(""),C=Object(r.a)(T,2),D=C[0],H=C[1];Object(o.useEffect)((function(){p().then((function(e){console.log("promise fulfilled"),c(e)}))}),[]);var J=""===y?t:t.filter((function(e){return e.name.toLowerCase().includes(y.toLowerCase())}));return u.a.createElement("div",null,u.a.createElement(f,{tag:"Phonebook"}),""===D?u.a.createElement(u.a.Fragment,null):u.a.createElement(g,{message:D}),u.a.createElement(m,{handleSubmit:function(e){e.preventDefault();var n=!0;t.forEach((function(e){if(e.name===s&&e.num===O)window.alert("".concat(s," is already in phonebook ")),n=!1;else if(e.num===O)window.alert("".concat(O," is already in phonebook ")),n=!1;else if(e.name===s&&e.num!==O){var r=t.find((function(e){return e.name===s})),o=Object(a.a)(Object(a.a)({},r),{},{num:O}),u=!1;window.confirm("".concat(o.name," is already added to phonebook ,replace the old number with the new one?"))&&(u=!0),u?(w(o.id,o).then((function(e){H("".concat(e.data.name," number is changed.")),setTimeout((function(){H(null)}),5e3),c(t.map((function(n){return n.id!==o.id?n:e.data})))})).catch((function(e){H("".concat(e.response.data.error)),setTimeout((function(){H(null)}),5e3)})),n=!1):n=!1}})),!1!==n&&(""!==s&&""!==O||(n=!1,window.alert("please add both name and number ")),n&&v({name:s,num:O}).then((function(e){H("".concat(e.data.name," is added to the server.")),setTimeout((function(){H(null)}),5e3),c(t.concat(e.data)),h(""),N("")})).catch((function(e){H("".concat(e.response.data.error)),setTimeout((function(){H(null)}),5e3)})))},filter:y,handleFilter:function(e){e.preventDefault(),F(e.target.value)},newName:s,handleName:function(e){h(e.target.value)},newNum:O,handleNum:function(e){N(e.target.value)}}),u.a.createElement(f,{tag:"Numbers"}),u.a.createElement(d,{people:J,deleteHandle:function(e,n){var a=!1;window.confirm("Do you really want to delete ".concat(n,"?"))&&(a=!0),a&&E(e).then((function(a){H("".concat(n,"'s number is deleted.")),setTimeout((function(){H(null)}),5e3),c(t.filter((function(n){return n.id!==e})))})).catch((function(e){alert("something went wrong")}))}}),"...")};l.a.render(u.a.createElement(j,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.00611923.chunk.js.map